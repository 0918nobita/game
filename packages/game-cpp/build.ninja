cppflags = -std=c++2a -Wall -Wextra -pthread
cpplibs =

rule obj
    depfile = $out.d
    command = clang++ $cppflags -c $in -MD -MF $out.d -o $out

rule exe
    command = clang++ $cppflags $in -o $out $cpplibs

build build/window.o: obj src/window.cpp
build build/main.o: obj src/main.cpp

build build/game: exe build/window.o build/main.o
    cpplibs = `pkg-config --libs glfw3,x11` -ldl

build build/output_vec: exe src/output_vec.cpp

default build/game
